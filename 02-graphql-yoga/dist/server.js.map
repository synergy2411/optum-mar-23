{"version":3,"file":"server.js","names":["_express","_interopRequireDefault","require","_graphqlYoga","_schema","_schema2","_resolvers","obj","__esModule","app","express","schema","makeExecutableSchema","typeDefs","resolvers","pubsub","createPubSub","yoga","createYoga","context","_ref","req","res","authHeader","headers","token","split","use","listen","console","log"],"sources":["../src/server.js"],"sourcesContent":["import express from 'express';\r\nimport { createYoga, createPubSub } from 'graphql-yoga';\r\nimport { makeExecutableSchema } from '@graphql-tools/schema';\r\nimport typeDefs from './graphql/schema';\r\nimport resolvers from './graphql/resolvers';\r\nimport \"./db\"\r\n\r\nconst app = express()\r\n\r\nconst schema = makeExecutableSchema({ typeDefs, resolvers })\r\n\r\nconst pubsub = createPubSub();\r\n\r\nconst yoga = createYoga({\r\n    schema,\r\n    context: ({ req, res }) => {\r\n        const authHeader = req.headers[\"authorization\"]                // \"Bearer tokenValue\"\r\n        let token = null;\r\n        if (authHeader) {\r\n            token = authHeader.split(\" \")[1]            //[\"Bearer\", \"tokenValue\"]\r\n        }\r\n        return {\r\n            token, pubsub\r\n        }\r\n    }\r\n})\r\n\r\napp.use(\"/graphql\", yoga)\r\n\r\napp.listen(4001, () => console.log(\"Server running on PORT : 4001\"))\r\n\r\n// http://localhost:4001/graphql"],"mappings":";;AAAA,IAAAA,QAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,YAAA,GAAAD,OAAA;AACA,IAAAE,OAAA,GAAAF,OAAA;AACA,IAAAG,QAAA,GAAAJ,sBAAA,CAAAC,OAAA;AACA,IAAAI,UAAA,GAAAL,sBAAA,CAAAC,OAAA;AACAA,OAAA;AAAa,SAAAD,uBAAAM,GAAA,WAAAA,GAAA,IAAAA,GAAA,CAAAC,UAAA,GAAAD,GAAA,gBAAAA,GAAA;AAEb,IAAME,GAAG,GAAG,IAAAC,mBAAO,GAAE;AAErB,IAAMC,MAAM,GAAG,IAAAC,4BAAoB,EAAC;EAAEC,QAAQ,EAARA,mBAAQ;EAAEC,SAAS,EAATA;AAAU,CAAC,CAAC;AAE5D,IAAMC,MAAM,GAAG,IAAAC,yBAAY,GAAE;AAE7B,IAAMC,IAAI,GAAG,IAAAC,uBAAU,EAAC;EACpBP,MAAM,EAANA,MAAM;EACNQ,OAAO,EAAE,SAAAA,QAAAC,IAAA,EAAkB;IAAA,IAAfC,GAAG,GAAAD,IAAA,CAAHC,GAAG;MAAEC,GAAG,GAAAF,IAAA,CAAHE,GAAG;IAChB,IAAMC,UAAU,GAAGF,GAAG,CAACG,OAAO,CAAC,eAAe,CAAC,EAAgB;IAC/D,IAAIC,KAAK,GAAG,IAAI;IAChB,IAAIF,UAAU,EAAE;MACZE,KAAK,GAAGF,UAAU,CAACG,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAY;IAChD;;IACA,OAAO;MACHD,KAAK,EAALA,KAAK;MAAEV,MAAM,EAANA;IACX,CAAC;EACL;AACJ,CAAC,CAAC;AAEFN,GAAG,CAACkB,GAAG,CAAC,UAAU,EAAEV,IAAI,CAAC;AAEzBR,GAAG,CAACmB,MAAM,CAAC,IAAI,EAAE;EAAA,OAAMC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;AAAA,EAAC;;AAEpE"}